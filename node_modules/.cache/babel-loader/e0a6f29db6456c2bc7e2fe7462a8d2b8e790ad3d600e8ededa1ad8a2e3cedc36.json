{"ast":null,"code":"import React,{useState,useEffect}from'react';import*as XLSX from'xlsx';import AdminLogin from'./AdminLogin';import'./Home.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LOCAL_KEY='splRegisteredPlayers';const Admin=()=>{const[players,setPlayers]=useState([]);const[editIndex,setEditIndex]=useState(null);const[editForm,setEditForm]=useState({});const[loggedIn,setLoggedIn]=useState(()=>sessionStorage.getItem('splAdminLoggedIn')==='true');useEffect(()=>{if(loggedIn){const data=localStorage.getItem(LOCAL_KEY);if(data)setPlayers(JSON.parse(data));}},[loggedIn]);const handleEdit=idx=>{setEditIndex(idx);setEditForm(players[idx]);};const handleEditChange=e=>{setEditForm({...editForm,[e.target.name]:e.target.value});};const handleEditSave=()=>{const updated=[...players];updated[editIndex]=editForm;setPlayers(updated);localStorage.setItem(LOCAL_KEY,JSON.stringify(updated));setEditIndex(null);};const handleDelete=idx=>{if(window.confirm('Delete this player?')){const updated=players.filter((_,i)=>i!==idx);setPlayers(updated);localStorage.setItem(LOCAL_KEY,JSON.stringify(updated));}};const downloadExcel=()=>{const ws=XLSX.utils.json_to_sheet(players);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,'Players');XLSX.writeFile(wb,`SPL_Registered_Players_${new Date().toISOString().split('T')[0]}.xlsx`);};const handleLogin=()=>{sessionStorage.setItem('splAdminLoggedIn','true');setLoggedIn(true);};if(!loggedIn){return/*#__PURE__*/_jsx(AdminLogin,{onLogin:handleLogin});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registered Players\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:downloadExcel,style:{marginBottom:16},children:\"Download Excel\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Building\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Wing\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Flat\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[players.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",style:{textAlign:'center'},children:\"No registrations yet.\"})}),players.map((p,idx)=>/*#__PURE__*/_jsx(\"tr\",{children:editIndex===idx?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:editForm.name,onChange:handleEditChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"age\",value:editForm.age,onChange:handleEditChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"phone\",value:editForm.phone,onChange:handleEditChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"building\",value:editForm.building,onChange:handleEditChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"wing\",value:editForm.wing,onChange:handleEditChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"flat\",value:editForm.flat,onChange:handleEditChange})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:handleEditSave,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>setEditIndex(null),children:\"Cancel\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{children:p.name}),/*#__PURE__*/_jsx(\"td\",{children:p.age}),/*#__PURE__*/_jsx(\"td\",{children:p.phone}),/*#__PURE__*/_jsx(\"td\",{children:p.building}),/*#__PURE__*/_jsx(\"td\",{children:p.wing}),/*#__PURE__*/_jsx(\"td\",{children:p.flat}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:()=>handleEdit(idx),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-danger\",onClick:()=>handleDelete(idx),children:\"Delete\"})]})]})},idx))]})]})})]});};export default Admin;","map":{"version":3,"names":["React","useState","useEffect","XLSX","AdminLogin","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LOCAL_KEY","Admin","players","setPlayers","editIndex","setEditIndex","editForm","setEditForm","loggedIn","setLoggedIn","sessionStorage","getItem","data","localStorage","JSON","parse","handleEdit","idx","handleEditChange","e","target","name","value","handleEditSave","updated","setItem","stringify","handleDelete","window","confirm","filter","_","i","downloadExcel","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","Date","toISOString","split","handleLogin","onLogin","className","children","onClick","style","marginBottom","length","colSpan","textAlign","map","p","onChange","age","phone","building","wing","flat"],"sources":["c:/Users/91983/OneDrive/Desktop/THIS PC/jeet/sankalp/spl/splfinall/src/components/Admin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport * as XLSX from 'xlsx';\nimport AdminLogin from './AdminLogin';\nimport './Home.css';\n\nconst LOCAL_KEY = 'splRegisteredPlayers';\n\nconst Admin = () => {\n  const [players, setPlayers] = useState([]);\n  const [editIndex, setEditIndex] = useState(null);\n  const [editForm, setEditForm] = useState({});\n  const [loggedIn, setLoggedIn] = useState(() => sessionStorage.getItem('splAdminLoggedIn') === 'true');\n\n  useEffect(() => {\n    if (loggedIn) {\n      const data = localStorage.getItem(LOCAL_KEY);\n      if (data) setPlayers(JSON.parse(data));\n    }\n  }, [loggedIn]);\n\n  const handleEdit = (idx) => {\n    setEditIndex(idx);\n    setEditForm(players[idx]);\n  };\n\n  const handleEditChange = (e) => {\n    setEditForm({ ...editForm, [e.target.name]: e.target.value });\n  };\n\n  const handleEditSave = () => {\n    const updated = [...players];\n    updated[editIndex] = editForm;\n    setPlayers(updated);\n    localStorage.setItem(LOCAL_KEY, JSON.stringify(updated));\n    setEditIndex(null);\n  };\n\n  const handleDelete = (idx) => {\n    if (window.confirm('Delete this player?')) {\n      const updated = players.filter((_, i) => i !== idx);\n      setPlayers(updated);\n      localStorage.setItem(LOCAL_KEY, JSON.stringify(updated));\n    }\n  };\n\n  const downloadExcel = () => {\n    const ws = XLSX.utils.json_to_sheet(players);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, 'Players');\n    XLSX.writeFile(wb, `SPL_Registered_Players_${new Date().toISOString().split('T')[0]}.xlsx`);\n  };\n\n  const handleLogin = () => {\n    sessionStorage.setItem('splAdminLoggedIn', 'true');\n    setLoggedIn(true);\n  };\n\n  if (!loggedIn) {\n    return <AdminLogin onLogin={handleLogin} />;\n  }\n\n  return (\n    <div className=\"admin-section\">\n      <h2>Registered Players</h2>\n      <button className=\"btn-primary\" onClick={downloadExcel} style={{marginBottom:16}}>Download Excel</button>\n      <div className=\"admin-table-wrapper\">\n        <table className=\"admin-table\">\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Age</th>\n              <th>Phone</th>\n              <th>Building</th>\n              <th>Wing</th>\n              <th>Flat</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {players.length === 0 && (\n              <tr><td colSpan=\"7\" style={{textAlign:'center'}}>No registrations yet.</td></tr>\n            )}\n            {players.map((p, idx) => (\n              <tr key={idx}>\n                {editIndex === idx ? (\n                  <>\n                    <td><input name=\"name\" value={editForm.name} onChange={handleEditChange} /></td>\n                    <td><input name=\"age\" value={editForm.age} onChange={handleEditChange} /></td>\n                    <td><input name=\"phone\" value={editForm.phone} onChange={handleEditChange} /></td>\n                    <td><input name=\"building\" value={editForm.building} onChange={handleEditChange} /></td>\n                    <td><input name=\"wing\" value={editForm.wing} onChange={handleEditChange} /></td>\n                    <td><input name=\"flat\" value={editForm.flat} onChange={handleEditChange} /></td>\n                    <td>\n                      <button className=\"btn-primary\" onClick={handleEditSave}>Save</button>\n                      <button className=\"btn-secondary\" onClick={()=>setEditIndex(null)}>Cancel</button>\n                    </td>\n                  </>\n                ) : (\n                  <>\n                    <td>{p.name}</td>\n                    <td>{p.age}</td>\n                    <td>{p.phone}</td>\n                    <td>{p.building}</td>\n                    <td>{p.wing}</td>\n                    <td>{p.flat}</td>\n                    <td>\n                      <button className=\"btn-secondary\" onClick={()=>handleEdit(idx)}>Edit</button>\n                      <button className=\"btn-danger\" onClick={()=>handleDelete(idx)}>Delete</button>\n                    </td>\n                  </>\n                )}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default Admin;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,GAAK,CAAAC,IAAI,KAAM,MAAM,CAC5B,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEpB,KAAM,CAAAC,SAAS,CAAG,sBAAsB,CAExC,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACc,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACgB,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACkB,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,IAAMoB,cAAc,CAACC,OAAO,CAAC,kBAAkB,CAAC,GAAK,MAAM,CAAC,CAErGpB,SAAS,CAAC,IAAM,CACd,GAAIiB,QAAQ,CAAE,CACZ,KAAM,CAAAI,IAAI,CAAGC,YAAY,CAACF,OAAO,CAACX,SAAS,CAAC,CAC5C,GAAIY,IAAI,CAAET,UAAU,CAACW,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,CAAC,CACxC,CACF,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAQ,UAAU,CAAIC,GAAG,EAAK,CAC1BZ,YAAY,CAACY,GAAG,CAAC,CACjBV,WAAW,CAACL,OAAO,CAACe,GAAG,CAAC,CAAC,CAC3B,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAIC,CAAC,EAAK,CAC9BZ,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAE,CAACa,CAAC,CAACC,MAAM,CAACC,IAAI,EAAGF,CAAC,CAACC,MAAM,CAACE,KAAM,CAAC,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAGtB,OAAO,CAAC,CAC5BsB,OAAO,CAACpB,SAAS,CAAC,CAAGE,QAAQ,CAC7BH,UAAU,CAACqB,OAAO,CAAC,CACnBX,YAAY,CAACY,OAAO,CAACzB,SAAS,CAAEc,IAAI,CAACY,SAAS,CAACF,OAAO,CAAC,CAAC,CACxDnB,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAsB,YAAY,CAAIV,GAAG,EAAK,CAC5B,GAAIW,MAAM,CAACC,OAAO,CAAC,qBAAqB,CAAC,CAAE,CACzC,KAAM,CAAAL,OAAO,CAAGtB,OAAO,CAAC4B,MAAM,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKf,GAAG,CAAC,CACnDd,UAAU,CAACqB,OAAO,CAAC,CACnBX,YAAY,CAACY,OAAO,CAACzB,SAAS,CAAEc,IAAI,CAACY,SAAS,CAACF,OAAO,CAAC,CAAC,CAC1D,CACF,CAAC,CAED,KAAM,CAAAS,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAAC,EAAE,CAAG1C,IAAI,CAAC2C,KAAK,CAACC,aAAa,CAAClC,OAAO,CAAC,CAC5C,KAAM,CAAAmC,EAAE,CAAG7C,IAAI,CAAC2C,KAAK,CAACG,QAAQ,CAAC,CAAC,CAChC9C,IAAI,CAAC2C,KAAK,CAACI,iBAAiB,CAACF,EAAE,CAAEH,EAAE,CAAE,SAAS,CAAC,CAC/C1C,IAAI,CAACgD,SAAS,CAACH,EAAE,CAAE,0BAA0B,GAAI,CAAAI,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAC7F,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxBlC,cAAc,CAACe,OAAO,CAAC,kBAAkB,CAAE,MAAM,CAAC,CAClDhB,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED,GAAI,CAACD,QAAQ,CAAE,CACb,mBAAOb,IAAA,CAACF,UAAU,EAACoD,OAAO,CAAED,WAAY,CAAE,CAAC,CAC7C,CAEA,mBACE/C,KAAA,QAAKiD,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BpD,IAAA,OAAAoD,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BpD,IAAA,WAAQmD,SAAS,CAAC,aAAa,CAACE,OAAO,CAAEf,aAAc,CAACgB,KAAK,CAAE,CAACC,YAAY,CAAC,EAAE,CAAE,CAAAH,QAAA,CAAC,gBAAc,CAAQ,CAAC,cACzGpD,IAAA,QAAKmD,SAAS,CAAC,qBAAqB,CAAAC,QAAA,cAClClD,KAAA,UAAOiD,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC5BpD,IAAA,UAAAoD,QAAA,cACElD,KAAA,OAAAkD,QAAA,eACEpD,IAAA,OAAAoD,QAAA,CAAI,MAAI,CAAI,CAAC,cACbpD,IAAA,OAAAoD,QAAA,CAAI,KAAG,CAAI,CAAC,cACZpD,IAAA,OAAAoD,QAAA,CAAI,OAAK,CAAI,CAAC,cACdpD,IAAA,OAAAoD,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBpD,IAAA,OAAAoD,QAAA,CAAI,MAAI,CAAI,CAAC,cACbpD,IAAA,OAAAoD,QAAA,CAAI,MAAI,CAAI,CAAC,cACbpD,IAAA,OAAAoD,QAAA,CAAI,SAAO,CAAI,CAAC,EACd,CAAC,CACA,CAAC,cACRlD,KAAA,UAAAkD,QAAA,EACG7C,OAAO,CAACiD,MAAM,GAAK,CAAC,eACnBxD,IAAA,OAAAoD,QAAA,cAAIpD,IAAA,OAAIyD,OAAO,CAAC,GAAG,CAACH,KAAK,CAAE,CAACI,SAAS,CAAC,QAAQ,CAAE,CAAAN,QAAA,CAAC,uBAAqB,CAAI,CAAC,CAAI,CAChF,CACA7C,OAAO,CAACoD,GAAG,CAAC,CAACC,CAAC,CAAEtC,GAAG,gBAClBtB,IAAA,OAAAoD,QAAA,CACG3C,SAAS,GAAKa,GAAG,cAChBpB,KAAA,CAAAE,SAAA,EAAAgD,QAAA,eACEpD,IAAA,OAAAoD,QAAA,cAAIpD,IAAA,UAAO0B,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEhB,QAAQ,CAACe,IAAK,CAACmC,QAAQ,CAAEtC,gBAAiB,CAAE,CAAC,CAAI,CAAC,cAChFvB,IAAA,OAAAoD,QAAA,cAAIpD,IAAA,UAAO0B,IAAI,CAAC,KAAK,CAACC,KAAK,CAAEhB,QAAQ,CAACmD,GAAI,CAACD,QAAQ,CAAEtC,gBAAiB,CAAE,CAAC,CAAI,CAAC,cAC9EvB,IAAA,OAAAoD,QAAA,cAAIpD,IAAA,UAAO0B,IAAI,CAAC,OAAO,CAACC,KAAK,CAAEhB,QAAQ,CAACoD,KAAM,CAACF,QAAQ,CAAEtC,gBAAiB,CAAE,CAAC,CAAI,CAAC,cAClFvB,IAAA,OAAAoD,QAAA,cAAIpD,IAAA,UAAO0B,IAAI,CAAC,UAAU,CAACC,KAAK,CAAEhB,QAAQ,CAACqD,QAAS,CAACH,QAAQ,CAAEtC,gBAAiB,CAAE,CAAC,CAAI,CAAC,cACxFvB,IAAA,OAAAoD,QAAA,cAAIpD,IAAA,UAAO0B,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEhB,QAAQ,CAACsD,IAAK,CAACJ,QAAQ,CAAEtC,gBAAiB,CAAE,CAAC,CAAI,CAAC,cAChFvB,IAAA,OAAAoD,QAAA,cAAIpD,IAAA,UAAO0B,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEhB,QAAQ,CAACuD,IAAK,CAACL,QAAQ,CAAEtC,gBAAiB,CAAE,CAAC,CAAI,CAAC,cAChFrB,KAAA,OAAAkD,QAAA,eACEpD,IAAA,WAAQmD,SAAS,CAAC,aAAa,CAACE,OAAO,CAAEzB,cAAe,CAAAwB,QAAA,CAAC,MAAI,CAAQ,CAAC,cACtEpD,IAAA,WAAQmD,SAAS,CAAC,eAAe,CAACE,OAAO,CAAEA,CAAA,GAAI3C,YAAY,CAAC,IAAI,CAAE,CAAA0C,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChF,CAAC,EACL,CAAC,cAEHlD,KAAA,CAAAE,SAAA,EAAAgD,QAAA,eACEpD,IAAA,OAAAoD,QAAA,CAAKQ,CAAC,CAAClC,IAAI,CAAK,CAAC,cACjB1B,IAAA,OAAAoD,QAAA,CAAKQ,CAAC,CAACE,GAAG,CAAK,CAAC,cAChB9D,IAAA,OAAAoD,QAAA,CAAKQ,CAAC,CAACG,KAAK,CAAK,CAAC,cAClB/D,IAAA,OAAAoD,QAAA,CAAKQ,CAAC,CAACI,QAAQ,CAAK,CAAC,cACrBhE,IAAA,OAAAoD,QAAA,CAAKQ,CAAC,CAACK,IAAI,CAAK,CAAC,cACjBjE,IAAA,OAAAoD,QAAA,CAAKQ,CAAC,CAACM,IAAI,CAAK,CAAC,cACjBhE,KAAA,OAAAkD,QAAA,eACEpD,IAAA,WAAQmD,SAAS,CAAC,eAAe,CAACE,OAAO,CAAEA,CAAA,GAAIhC,UAAU,CAACC,GAAG,CAAE,CAAA8B,QAAA,CAAC,MAAI,CAAQ,CAAC,cAC7EpD,IAAA,WAAQmD,SAAS,CAAC,YAAY,CAACE,OAAO,CAAEA,CAAA,GAAIrB,YAAY,CAACV,GAAG,CAAE,CAAA8B,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC5E,CAAC,EACL,CACH,EA3BM9B,GA4BL,CACL,CAAC,EACG,CAAC,EACH,CAAC,CACL,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}